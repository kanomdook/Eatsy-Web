<!-- <div class="loader" *ngIf="!shopsL" #loadingControl>
  <img src="./assets/img/Infinity.gif" alt="">
</div> -->
<div class="main-content">

  <div class="container-fluid">
    <div>
      <button type="button">
        <a data-toggle="modal" data-target="#modalEditUser">Modal</a>
      </button>
      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a href="#customer" aria-controls="customer" role="tab" data-toggle="tab">ลูกค้า</a>
        </li>
        <li role="presentation">
          <a href="#shopowner" aria-controls="shopowner" role="tab" data-toggle="tab">เจ้าของร้าน</a>
        </li>
        <li role="presentation">
          <a href="#admin" aria-controls="admin" role="tab" data-toggle="tab">แอดมิน</a>
        </li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">

        <!-- Tab Customer -->
        <div role="tabpanel" class="tab-pane active" id="customer">
          <div class="tab-content">
            <!-- <div id="tab{{k}}" *ngFor="let item of shopsL.name; let k = index" class="tab-pane fade in {{ k === 0 ? 'active':''}}"> -->
            <div>
              <div class="row">
                <div class="col-md-12">
                  <div class="card">
                    <div class="card-content table-responsive">
                      <table class="table">
                        <thead class="text-danger">
                          <tr>
                            <th class="text-center" index-col-size>#</th>
                            <th class="text-center" displayname-col-size>ชื่อที่แสดง</th>
                            <th class="text-center" name-col-size>ชื่อ - นามสกุล</th>
                            <th class="text-center col-md-2 tel-col-size">เบอร์โทร</th>
                            <th class="text-center" email-col-size>อีเมล์</th>
                            <th class="text-center col-md-1">วันที่บันทึก</th>

                            <th class="text-center col-md-1 col-lg-1 action-col-size">
                              Action
                              <!-- <span style="margin-right:-50px"></span> -->
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- <tr *ngIf="shopsL.items.length <=0"> -->
                          <tr>
                            <td colspan="7" class="text-center">
                              ยังไม่มีข้อมูลผู้ใช้ในระบบค่ะ
                            </td>

                          </tr>
                          <!-- <tr *ngFor="let item of shopsL.items; let i = index ">
                            <td>{{i + pageSelect + 1}}</td>
                            <td>{{item.name}}</td>
                            <td class="text-center">{{item.tel ? item.tel: '-'}}</td>
                            <td *ngIf="!item.address">ไม่ปรากฎที่อยู่ร้าน</td>
                            <td *ngIf="item.address">{{item.address.address ? item.address.address: '-'}}</td>
                            <td class="text-center">{{item.importform}}
                              <p subText>by {{item.user.firstName}}</p>
                            </td>
                            <td class="text-center ">
      
                              <button class="btn btn-success btn-simple btn-xs btn-border" type="button" *ngIf="!item.issendmail && item.email" (click)="isSendMail(item)">
                                SEND USER
                              </button>
                              <p *ngIf="item.issendmail">Joined</p>
                            </td>
                            <td class="text-center">
                              <ui-switch [(ngModel)]="item.isactiveshop" (change)="activeChange($event,item)"></ui-switch>
      
      
                              <div class="dropdown pull-right">
                                <button class="btn btn-simple btn-xs pull-right dropdown-toggle " type="button" id="dropdownMenu2" data-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="true">
                                  <i class="material-icons toggle-color">more_horiz</i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                  <span (click)="editShop(item)">
                                    <i class="material-icons edit-color">border_color</i>
                                  </span>
                                  <span (click)="deleteShop(item._id)">
                                    <i class="material-icons del-color">delete</i>
                                  </span>
      
                                </ul>
                              </div>
      
                            </td>
                          </tr> -->

                        </tbody>
                      </table>

                      <div class="pc">
                        <nav aria-label="Page navigation">
                          <ul class="pagination">
                            <li [class]="curentPage[item]" *ngFor="let item of shopsL.pagings">
                              <a (click)="pageing(item)">{{item}}</a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <!-- Tab Customer -->

        <div role="tabpanel" class="tab-pane" id="shopowner">
          <div class="tab-content">
            <!-- <div id="tab{{k}}" *ngFor="let item of shopsL.name; let k = index" class="tab-pane fade in {{ k === 0 ? 'active':''}}"> -->
            <div>
              <div class="row">
                <div class="col-md-12">
                  <div class="card">
                    <div class="card-content table-responsive">
                      <table class="table">
                        <thead class="text-danger">
                          <tr>
                            <th class="text-center" index-col-size>#</th>
                            <th class="text-center" displayname-col-size>ชื่อที่แสดง</th>
                            <th class="text-center" name-col-size>ชื่อ - นามสกุล</th>
                            <th class="text-center col-md-2 tel-col-size">เบอร์โทร</th>
                            <th class="text-center" email-col-size>อีเมล์</th>
                            <th class="text-center col-md-1">วันที่บันทึก</th>

                            <th class="text-center col-md-1 col-lg-1 action-col-size">
                              Action
                              <!-- <span style="margin-right:-50px"></span> -->
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- <tr *ngIf="shopsL.items.length <=0"> -->
                          <tr>
                            <td colspan="7" class="text-center">
                              ยังไม่มีข้อมูลผู้ใช้ในระบบค่ะ
                            </td>

                          </tr>
                          <!-- <tr *ngFor="let item of shopsL.items; let i = index ">
                                <td>{{i + pageSelect + 1}}</td>
                                <td>{{item.name}}</td>
                                <td class="text-center">{{item.tel ? item.tel: '-'}}</td>
                                <td *ngIf="!item.address">ไม่ปรากฎที่อยู่ร้าน</td>
                                <td *ngIf="item.address">{{item.address.address ? item.address.address: '-'}}</td>
                                <td class="text-center">{{item.importform}}
                                  <p subText>by {{item.user.firstName}}</p>
                                </td>
                                <td class="text-center ">
          
                                  <button class="btn btn-success btn-simple btn-xs btn-border" type="button" *ngIf="!item.issendmail && item.email" (click)="isSendMail(item)">
                                    SEND USER
                                  </button>
                                  <p *ngIf="item.issendmail">Joined</p>
                                </td>
                                <td class="text-center">
                                  <ui-switch [(ngModel)]="item.isactiveshop" (change)="activeChange($event,item)"></ui-switch>
          
          
                                  <div class="dropdown pull-right">
                                    <button class="btn btn-simple btn-xs pull-right dropdown-toggle " type="button" id="dropdownMenu2" data-toggle="dropdown"
                                      aria-haspopup="true" aria-expanded="true">
                                      <i class="material-icons toggle-color">more_horiz</i>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                      <span (click)="editShop(item)">
                                        <i class="material-icons edit-color">border_color</i>
                                      </span>
                                      <span (click)="deleteShop(item._id)">
                                        <i class="material-icons del-color">delete</i>
                                      </span>
          
                                    </ul>
                                  </div>
          
                                </td>
                              </tr> -->

                        </tbody>
                      </table>

                      <div class="pc">
                        <nav aria-label="Page navigation">
                          <ul class="pagination">
                            <li [class]="curentPage[item]" *ngFor="let item of shopsL.pagings">
                              <a (click)="pageing(item)">{{item}}</a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="admin">.sdsdsds.</div>
      </div>

    </div>

  </div>
</div>

<!-- MODAL EDIT USER -->
<div class="modal fade" id="modalEditUser" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="exampleModalLabel">นำเข้าข้อมูลจาก {{importForm}}</h4>
      </div>
      <div class="modal-body">
        <div class="row bd">
          <div class="col-md-4">
            <div class="form-group form-black is-empty">
              ละแวก (เช่น สยามพารากอน)
              <!-- <label class="control-label">ละแวก (เช่น สยามพารากอน)</label> -->
              <input class="form-control" type="text" [(ngModel)]="local">
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group form-black is-empty">

              ค้นหาประเภทร้านค้า
              <select class="form-control" [(ngModel)]="shopType">
                <option *ngIf="importForm == 'Google'" value="">ทั้งหมด</option>
                <option *ngIf="importForm == 'Google'" value="restaurant">restaurant</option>
                <option *ngIf="importForm == 'Google'" value="store">store</option>
                <option *ngIf="importForm == 'Google'" value="cafe">cafe</option>
                <option *ngIf="importForm == 'Facebook'" value="place">place</option>
              </select>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group form-black is-empty">
              คำค้นหา (เช่น coffee)
              <!-- <label class="control-label">คำค้นหา (เช่น coffee)</label> -->
              <input class="form-control" type="text" [(ngModel)]="keyword">
            </div>
          </div>
          <div class="col-md-2 mt-10">
            <div class="form-group form-black is-empty">
              <button class="btn btn-info" (click)="search()">ค้นหา</button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-3" *ngFor="let item of shopList" (click)="selectShops(item.id)">
            <div class="hv" *ngIf="loadingIdx[item.id]">
              <img src="../../assets/img/301.svg" alt="Loading..." class="mgt-148">
            </div>
            <div class="card" style="width: 20rem">
              <span class="lo" *ngIf="selectedShop[item.id]">
                <img class="ic" src="https://i0.wp.com/triagelogic.com/wp-content/uploads/2016/02/successful-registration.png?resize=300%2C300&ssl=1">
              </span>
              <img class="card-img-top" [src]="item.img" alt="Card image">
              <div class="card-block pd-4">
                <h4 class="card-title ellipsis">
                  <b>{{item.name}}</b>
                </h4>
                <p class="card-text ellipsis">{{item.vicinity}}</p>
                <p class="card-text ellipsis">เบอร์โทรศัพท์ {{item.phone ? item.phone : '-'}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="saveShops()">บันทึกข้อมูล</button>
        <button type="button" #dissmissBtn class="btn btn-default" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL EDIT USER -->